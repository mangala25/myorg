try {
	
	node
	{  		
		stage('clean-workspace') {
		    echo :'current working direcotiy is :' 
		    echo :pwd
		    sh 'rm -rf /var/lib/jenkins/workspace/RandomProject/*'
		    //sh 'mvn --version'
		   // def mvnTool = new MavenTool('Maven 3.3.9')
		    //mvnTool.mvn this, "clean install"
		    //mvnTool.mvn this, "clean package"
		}
		stage('git-latest') {
		    echo 'git-latest'
		    def rtGradle = Artifactory.newGradleBuild()
		    def config = [:]
		    config.serviceRepo = 'https://github.com/varunasunmathi/test.git'
    		    config.gitBranch = 'master'	
		    echo "check out branch ${config.gitBranch} from ${config.serviceRepo}"
                    //git branch: config.gitBranch, url: config.serviceRepo //working step
			
    		    //env.JAVA_HOME="${tool 'jdk8u162'}"
		}
		stage('mvn-build') {
		    echo 'mvn-build'
			
		    withMaven(
			// Maven installation declared in the Jenkins "Global Tool Configuration"
			maven: 'M3',
			// Maven settings.xml file defined with the Jenkins Config File Provider Plugin
			// Maven settings and global settings can also be defined in Jenkins Global Tools Configuration
			mavenSettingsConfig: 'my-maven-settings',
			mavenLocalRepo: '.repository') {

		      // Run the maven build
		      sh "mvn clean install"

		    } // withMaven will discover the generated Maven artifacts, JUnit Surefire & FailSafe & FindBugs reports...
  
		}
		stage('mvn-junit') {
		    echo 'mvn-junit'
		}
		stage('mvn-sonar') {
		    echo 'mvn-sonar'
		}
		stage('pcf-push'){
		    echo 'pcf-push'
		}
	
	}
}
catch (e){
        echo "${e}"
}
